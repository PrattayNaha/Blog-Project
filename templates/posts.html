{% load static %}
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>The Tech Journal</title>
  <link rel="stylesheet" type="text/css" href="{% static 'style.css' %}">
</head>
<body>
<a href="{% url 'index' %}" style="text-decoration: none; color: inherit;">
<div class="header" style="cursor: pointer;">
  <h1>The Tech Journal</h1>
  <p>Science ‚Ä¢ Systems ‚Ä¢ Solutions</p>
</div>
</a>
<div class="row">
  <div class="leftcolumn">
    <div class="card">
        <h2>{{ posts.title }}</h2>
        <h5>{{ posts.created_at }} | by {{ posts.author.username }}</h5>
        {% if posts.image %}
          <img src="{{ posts.image.url }}" alt="{{ posts.title }}" class="blog-img" style="height:300px; width:100%; object-fit:cover; border-radius:12px; margin-bottom:16px;">
        {% endif %}
        <div class="post-body">
            {{ posts.body|safe }}
            {% comment %} <img src="{% static 'images/inline.jpg' %}" alt="" style="float:right; width:40%; margin:0 0 10px 10px;"> {% endcomment %}
            <div class="author-btn">
              <a href="{% url 'profile' posts.author.username %}" style="text-decoration: none; color: inherit;">
                <!-- Author profile picture -->
                <img src="{{ posts.author.profile.profile_picture.url }}" 
                    alt="{{ posts.author.username }}" >
                <div class="author-info">
                    <p style="margin: 0 0 4px 0; font-size: 15px; color: #333;">
                        <span style="font-weight: 500;">Author :</span>
                        <span style="font-weight: 700;">{{ posts.author.username }}</span>
                    </p>
                    <p style="margin: 0; font-size: 14px; color: #555; text-align: justify;">
                        {{ posts.author.profile.about|default:"No bio available." }}
                    </p>
                </div>
              </a>
            </div>
            <div class="card" style="margin-top: 20px; padding: 15px;">

              <!-- LIKE BUTTON -->
              <form method="POST" action="{% url 'like_post' posts.id %}" style="margin-bottom: 10px;">
                {% csrf_token %}
                <button type="submit" class="btn">
                  üëç Like ({{ posts.likes.count }})
                </button>
              </form>

              <!-- COMMENT FORM -->
              <h3>Leave a Comment</h3>
              <form method="POST" action="{% url 'add_comment' posts.id %}">
                {% csrf_token %}
                <textarea name="body" rows="5" cols="50" placeholder="Write your comment..." required></textarea><br>
                <button type="submit" class="btn">Submit</button>
              </form>

              <!-- SHOW COMMENTS -->
              <div class="comments-section" style="margin-top: 20px;">
                <h4>Comments:</h4>
                {% for comment in posts.comments.all %}
                  <div style="display: flex; justify-content: space-between; align-items: center; gap:10px; margin-bottom: 6px; padding: 6px 10px; background: #f9f9f9; border-radius: 8px;">
                    <span style="font-size: 14px;">
                      <strong>{{ comment.author.username }}</strong>: {{ comment.body }}
                    </span>
                    {% if user.is_authenticated and comment.author == user %}
                      <form method="POST" action="{% url 'delete_comment' comment.id %}" style="display:inline;">
                        {% csrf_token %}
                        <button type="submit" 
                                style="font-size: 15px; color: red; background: none; border: none; cursor: pointer;">
                          Delete
                        </button>
                      </form>
                    {% endif %}
                  </div>
                {% empty %}
                  <p style="font-size: 14px; color: gray;">No comments yet.</p>
                {% endfor %}
              </div>
            </div>
        </div>
    </div>
  </div>
</div>
<div class="footer" style="background: linear-gradient(90deg, #4f46e5 10%, #e0e7ff 100%);
            align-items: center;
            width: 92%;
            padding: 20px;
            color: white;
            margin: 40px auto 0 auto;  /* centers the footer */
            text-align: center; /* centers text inside */
            border-radius: 10px;">
  <h2>Footer</h2>
</div>
</body>
</html>

<style>
.btn {
  background-color: #007BFF;   /* blue background */
  color: white;               /* white text */
  border: none;               /* remove border */
  padding: 8px 16px;          /* spacing */
  font-size: 15px;
  font-weight: bold;
  border-radius: 6px;         /* rounded corners */
  cursor: pointer;            /* pointer cursor */
  transition: 0.3s ease;      /* smooth hover effect */
  }

.btn:hover {
  background-color: #0056b3;  /* darker blue on hover */
  transform: scale(1.05);     /* slight zoom effect */
}

.btn:active {
  transform: scale(0.95);     /* small press effect */
}
.author-btn {
  background-color: white;   /* blue background */
  color: black;               /* black text */
  border: none;               /* remove border */
  padding: 8px 16px;          /* spacing */
  font-size: 15px;
  font-weight: bold;
  border-radius: 6px;         /* rounded corners */
  cursor: pointer;            /* pointer cursor */
  transition: 0.3s ease;      /* smooth hover effect */
  box-shadow: 0 4px 18px rgba(6, 182, 212, 0.10);
  }

.author-btn:hover {
  background-color: #f1f1f1;  /* darker blue on hover */
  transform: scale(1.02);     /* slight zoom effect */
}

.author-btn:active {
  transform: scale(0.95);     /* small press effect */
}
.author-btn {
    display: flex;
    align-items: flex-start; /* keep items aligned at the top */
    gap: 10px; /* spacing between image and text */
}

.author-btn img {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    object-fit: cover;
    flex-shrink: 0; /* prevent image from shrinking */
}

</style>